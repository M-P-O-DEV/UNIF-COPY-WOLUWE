<!DOCTYPE html>
<html lang="fr"><head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>UNIF-COPY WOLUWE - Impression sur Place</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap');
  * { box-sizing: border-box; }
  body { margin: 0; background: linear-gradient(135deg, #1a1a1a, #2f2f2f, #121212); font-family: 'Orbitron', sans-serif; color: #ff6f00; display: flex; flex-direction: column; align-items: center; min-height: 100vh; overflow-x: hidden; user-select: none; }
  body.overlay-active { overflow: hidden; }
  header { width: 100%; padding: 25px 0; background: linear-gradient(90deg, #ff6f00, #ffb347); color: black; font-size: 2.8rem; font-weight: 900; text-align: center; letter-spacing: 2px; position: relative; overflow: hidden; border-bottom: 4px solid #ff6f00; }
  main { width: 100%; max-width: 700px; padding: 30px 25px; text-align: center; }
  button, .link-button { position: relative; background: transparent; border: 3px solid #ff6f00; color: #ff6f00; font-family: 'Orbitron', sans-serif; font-weight: 900; font-size: 1.2rem; padding: 14px 25px; border-radius: 10px; cursor: pointer; overflow: hidden; transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 1.5px; user-select: none; box-shadow: 0 0 5px #ff6f00, 0 0 15px #ffb347; margin: 10px 0; display: inline-block; text-decoration: none; width: 100%; }
  button:hover, .link-button:hover { color: #ffb347; border-color: #ffb347; box-shadow: 0 0 10px #ffb347, 0 0 20px #ffb347, 0 0 40px #ffb347; }
  .section-title { font-size: 1.8rem; margin-top: 20px; margin-bottom: 20px; border-bottom: 2px solid #ff6f00; padding-bottom: 10px; text-align: center; line-height: 1.2; }
  .bloc { background: rgba(47, 47, 47, 0.3); border: 1px solid #ff6f00; border-radius: 15px; padding: 20px; margin-bottom: 25px; }
  .bloc-description { font-size: 0.9rem; color: #ffb347; margin-bottom: 15px; line-height: 1.4; }
  .button-group { display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; }
  .button-group button, .button-group .link-button { flex: 1 1 200px; min-width: 200px; }
  video { width: 100%; max-width: 600px; border-radius: 15px; box-shadow: 0 0 20px #ff6f00, 0 0 40px #ffb347, inset 0 0 20px #ff6f00; position: relative; background: #121212; }
  
  .overlay { 
    position: fixed; 
    top: 0; 
    left: 0; 
    right: 0; 
    bottom: 0; 
    background: rgba(18, 18, 18, 0.95); 
    color: #ff6f00; 
    display: none; 
    flex-direction: column; 
    justify-content: flex-start;
    align-items: center; 
    padding: 40px 25px;
    text-align: center; 
    z-index: 9999; 
    overflow-y: auto;
  }

  .overlay-content { max-width: 500px; width: 90%; }
  .printer-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; width: 100%; margin-bottom: 20px; }

  .download-page-title { font-size: 1.3rem; color: #ffb347; line-height: 1.5; margin-bottom: 30px; }
  .download-choice { background: rgba(47, 47, 47, 0.5); border: 1px solid #ffb347; border-radius: 15px; padding: 25px; margin-bottom: 20px; }
  .download-choice h3 { margin-top: 0; font-size: 1.5rem; }
  .download-choice p { font-size: 0.9rem; line-height: 1.4; color: #fff; }
  .share-popup-separator { font-size: 1.5rem; margin: 20px 0; font-weight: 900; color: #ffb347; }
  #share-qr-code { max-width: 200px; width: 100%; border: 2px solid #ffb347; border-radius: 10px; margin-top: 15px; }
  .view { display: none; }

  #horaires-contenu {
    font-size: 1.3rem;
    line-height: 1.7;
  }
  #contact-phone, #contact-mail {
    font-size: 1.1rem;
    line-height: 1.6;
  }
  #copy-instructions {
    text-align: left;
    color: #fff;
    font-size: 1rem;
    line-height: 1.6;
    list-style-position: inside;
    padding-left: 0;
    margin-top: 15px;
  }
  #copy-instructions li {
    margin-bottom: 10px;
  }
  /* --- MODIFICATION CSS --- */
  #copied-email-box {
    color: #ffb347;
    font-weight: bold;
    font-size: 1rem; /* Taille de police l√©g√®rement r√©duite */
    margin: 15px 0;
    padding: 10px;
    border: 1px solid #ffb347;
    border-radius: 8px;
    white-space: nowrap; /* Emp√™che le retour √† la ligne */
    overflow: hidden; /* Cache tout ce qui pourrait d√©border */
    text-overflow: ellipsis; /* Ajoute "..." si le texte est encore trop long */
    text-align: center;
  }
  /* --- FIN MODIFICATION CSS --- */
</style>
</head>
<body>
  <header data-text="UNIF-COPY WOLUWE">UNIF-COPY WOLUWE</header>

  <main>
    <div id="main-dashboard" class="view" style="display: block;">
      
      <h2 class="section-title">IMPRESSIONS<br>SELF-SERVICE</h2>
      
      <div class="bloc"><h3>D√©p√¥t Rapide (Recommand√©)</h3><p class="bloc-description">Pour tous vos fichiers (PDF, photos...). Id√©al pour envoyer plusieurs fichiers √† la fois.</p><button id="depositFileBtn">D√©poser mes fichiers</button></div>
      <div class="bloc"><h3>Envoi par E-mail</h3><p class="bloc-description">Choisissez la situation qui vous correspond.</p><div class="button-group"><button id="haveFileOnPhoneBtn">J'ai un fichier sur mon t√©l√©phone</button><button id="transferEmailBtn">Je veux transf√©rer un e-mail</button></div></div>
      <div class="bloc"><h3>Transfert par QR Code</h3><p class="bloc-description">Pour une connexion directe et rapide entre votre t√©l√©phone et le PC.</p><button id="scanQRCodeBtn">ENVOYER PAR QR CODE</button></div>
      
      <h2 class="section-title">COMMANDES</h2>
      <div class="button-group"><a id="orderOnlineLink" href="https://commande.facopy.be/" target="_blank" rel="noopener noreferrer" class="link-button">Commander en ligne</a><button id="orderByMailBtn">Commander par mail</button></div>
      
      <h2 class="section-title">INFORMATIONS</h2>
      <div class="button-group"><button id="hoursBtn">Heures d'ouverture</button><button id="contactsBtn">Contacts</button></div>

      <h2 class="section-title">APPLICATION</h2>
      <div class="button-group">
        <button id="downloadAppBtn">T√©l√©charger l'application</button>
        <button id="shareAppBtn">Partager l'application</button>
      </div>
    </div>

    <div id="download-view" class="view" style="width:100%;">
        <h2 class="download-page-title">T√©l√©chargez l'application pour l'ajouter √† votre √©cran d'accueil, plus besoin de scanner notre QR code la prochaine fois !</h2>
        <div class="download-choice">
            <h3>Android</h3>
            <p>Obtenez la version officielle et s√©curis√©e de l'application sur le Google Play Store.</p>
            <button id="downloadAndroidBtn">TELECHARGER SUR GOOGLE PLAY</button>
        </div>
        <div class="download-choice">
            <h3>iOS (iPhone)</h3>
            <p>Suivez ces √©tapes simples pour ajouter l'application √† votre √©cran d'accueil :</p>
            <ol style="text-align: left; color: #ffb347; font-size: 0.9rem; line-height: 1.6;">
                <li>Appuyez sur l'ic√¥ne de <strong>Partage</strong> üì§ en bas de l'√©cran.</li>
                <li>Faites d√©filer et choisissez <strong>"Sur l'√©cran d'accueil"</strong>.</li>
            </ol>
        </div>
        <button id="backToMainFromDownloadBtn" style="margin-top: 20px;">RETOUR</button>
    </div>

    <div id="scanner-view" class="view" style="width:100%;">
      <video id="video" playsinline="" autoplay="" muted=""></video>
      <div id="scanInstruction" style="margin-top: 15px; background: rgba(0,0,0,0.8); color: #ffb347; padding: 15px; border-radius: 10px; border: 1px solid #ffb347; font-size: 1.1rem; line-height: 1.4;">Sur le PC devant vous, double-cliquez sur l'ic√¥ne "SCAN QR CODE" et visez le QR code qui appara√Æt.</div>
      <button id="cancelScanBtn" style="margin-top: 15px;">ANNULER</button>
    </div>
  </main>
  
  <div id="hoursOverlay" class="overlay"><div class="overlay-content"><div id="horaires-contenu">√Ä PARTIR DU 04/08/25<br><br>LUNDI AU SAMEDI<br>10H00 - 14H00<br>14H30 - 17H00</div></div><button class="close-overlay-btn" style="margin-top:20px;">RETOUR</button></div>
  <div id="contactsOverlay" class="overlay"><div class="overlay-content" style="display:flex; flex-direction:column; gap:20px; width:100%; max-width: 400px;"><div id="contact-phone"><span>TELEPHONE :</span><br>02 461 30 05<button onclick="window.location.href='tel:+3224613005'" style="margin-top:10px;">APPELER</button></div><div id="contact-mail"><span>MAIL :</span><br>FACOPYBXL@PROXIMUS.BE<button onclick="window.location.href='mailto:FACOPYBXL@PROXIMUS.BE'" style="margin-top:10px;">POSER UNE QUESTION</button></div></div><button class="close-overlay-btn" style="margin-top:30px;">RETOUR</button></div>
  <div id="orderMailOverlay" class="overlay"><div class="overlay-content"><div id="order-mail-address">FACOPYBXL@PROXIMUS.BE</div><br><button id="order-mail-action-btn">ENVOYER UN MAIL</button></div><button class="close-overlay-btn" style="margin-top:20px;">RETOUR</button></div>
  
  <div id="printerSelectOverlay" class="overlay">
    <div class="overlay-content">
        <h3 style="font-size: 1.5rem; margin-bottom: 20px;">S√âLECTIONNEZ LE PC EN FACE DE VOUS</h3>
        <div class="printer-grid" id="printer-grid-container"><button class="printer-choice-btn" data-link-id="pc1">PC 1</button><button class="printer-choice-btn" data-link-id="pc2">PC 2</button><button class="printer-choice-btn" data-link-id="pc3">PC 3</button><button class="printer-choice-btn" data-link-id="pc4">PC 4</button><button class="printer-choice-btn" data-link-id="pc5">PC 5</button><button class="printer-choice-btn" data-link-id="pc6">PC 6</button><button class="printer-choice-btn" data-link-id="pc7">PC 7</button><button class="printer-choice-btn" data-link-id="pc9">PC 9</button><button class="printer-choice-btn" data-link-id="pc10">PC 10</button><button class="printer-choice-btn" data-link-id="pcA">PC A</button><button class="printer-choice-btn" data-link-id="pcB">PC B</button><button class="printer-choice-btn" data-link-id="pcC">PC C</button></div><div style="width: 100%; margin-top: 20px;"><button class="printer-choice-btn" data-link-id="pcCaisse">PC CAISSE</button><button class="close-overlay-btn" style="margin-top: 10px;">RETOUR</button></div>
        <!-- Les boutons du bas seront ajout√©s ici par le script -->
    </div>
  </div>

  <div id="copyEmailOverlay" class="overlay">
    <div class="overlay-content" style="border: 2px solid #00ff00; padding: 25px; border-radius: 15px; background: #1a1a1a;">
      <h3 id="copy-confirm-title" style="font-size: 1.3rem; line-height: 1.5; color: #00ff00; margin-top:0; font-weight:bold;"></h3>
      <div id="copied-email-box"></div>
      <ol id="copy-instructions"></ol>
      <button class="close-overlay-btn" style="margin-top: 20px;">J'AI COMPRIS</button>
    </div>
  </div>

  <div id="scanResultOverlay" class="overlay"><div class="overlay-content" style="border: 2px solid #ffb347; padding: 25px; border-radius: 15px; background: #1a1a1a;"><h3 style="font-size: 1.5rem; margin-top:0;">Lien D√©tect√©</h3><p id="scan-result-link" style="font-size: 1rem; color: #ffb347; word-break: break-all; margin: 20px 0;"></p><div class="button-group"><button id="followScanLinkBtn">SUIVRE LE LIEN</button><button id="rescanBtn">RECOMMENCER</button></div></div></div>
  
  <div id="shareOverlay" class="overlay">
    <div class="overlay-content">
      <h3 style="font-size: 1.5rem; margin-bottom: 20px;">Partager l'application avec vos amis</h3>
      <p style="color: #ffb347;">Partager par QR Code</p>
      <img id="share-qr-code" src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&amp;data=https://VOTRE_URL_ICI" alt="QR Code de Partage">
      <div class="share-popup-separator">OU</div>
      <div class="button-group" style="margin-top: 10px;">
        <button id="nativeShareBtn">Envoyer le lien</button>
        <button class="close-overlay-btn">RETOUR</button>
      </div>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // --- BLOC DE CONFIGURATION ---
    const config = {
      heuresOuverture: `√Ä PARTIR DU 04/08/25<br><br>LUNDI AU SAMEDI<br>10H00 - 14H00<br>14H30 - 17H00`,
      emailCommande: "FACOPYBXL@PROXIMUS.BE",
      emailSelfService: "UNIFCOPY@OUTLOOK.COM",
      telephone: "024613005",
      lienCommandeEnLigne: "https://commande.facopy.be/",
      liensDropbox: {
        pc1: "LIEN_DROPBOX_PC_1", pc2: "LIEN_DROPBOX_PC_2", pc3: "LIEN_DROPBOX_PC_3",
        pc4: "LIEN_DROPBOX_PC_4", pc5: "LIEN_DROPBOX_PC_5", pc6: "LIEN_DROPBOX_PC_6",
        pc7: "LIEN_DROPBOX_PC_7", pc9: "LIEN_DROPBOX_PC_9", pc10: "LIEN_DROPBOX_PC_10",
        pcA: "LIEN_DROPBOX_PC_A", pcB: "LIEN_DROPBOX_PC_B", pcC: "LIEN_DROPBOX_PC_C",
        pcCaisse: "LIEN_DROPBOX_PC_CAISSE"
      }
    };

    // --- INITIALISATION DE LA PAGE ---
    document.getElementById('horaires-contenu').innerHTML = config.heuresOuverture;
    document.getElementById('orderOnlineLink').href = config.lienCommandeEnLigne;
    document.getElementById('order-mail-address').textContent = config.emailCommande;
    document.getElementById('order-mail-action-btn').onclick = () => window.location.href = `mailto:${config.emailCommande}`;
    document.getElementById('contact-phone').innerHTML = `<span>TELEPHONE :</span><br>${config.telephone.replace(/(\d{2})(\d{3})(\d{2})(\d{2})/, '$1 $2 $3 $4')}<button onclick="window.location.href='tel:+32${config.telephone.substring(1)}'" style="margin-top:10px;">APPELER</button>`;
    document.getElementById('contact-mail').innerHTML = `<span>MAIL :</span><br>${config.emailCommande}<button onclick="window.location.href='mailto:${config.emailCommande}'" style="margin-top:10px;">POSER UNE QUESTION</button>`;
    document.getElementById('scanInstruction').innerHTML = `Sur le PC devant vous, double-cliquez sur l'ic√¥ne "SCAN QR CODE" et visez le QR code qui appara√Æt.`;

    const printerGrid = document.getElementById('printer-grid-container');
    const overlayContent = printerGrid.parentElement;

    const caisseContainer = document.createElement('div');
    caisseContainer.style.width = '100%';
    caisseContainer.style.marginTop = '20px';

    for (const pcId in config.liensDropbox) {
        const button = document.createElement('button');
        button.className = 'printer-choice-btn';
        button.dataset.linkId = pcId;
        
        button.addEventListener('click', () => {
            const dropboxUrl = config.liensDropbox[pcId];
            if (dropboxUrl && dropboxUrl.startsWith('https')) {
                window.open(dropboxUrl, '_blank');
                toggleOverlay(document.getElementById('printerSelectOverlay'), false);
            } else {
                alert('Lien de d√©p√¥t non configur√© pour ce PC.');
            }
        });

        if (pcId === 'pcCaisse') {
            button.textContent = 'PC CAISSE';
            caisseContainer.appendChild(button);
        } else {
            button.textContent = `PC ${pcId.replace('pc', '').toUpperCase()}`;
            printerGrid.appendChild(button);
        }
    }

    printerGrid.after(caisseContainer);

    const newBackButton = document.createElement('button');
    newBackButton.textContent = 'RETOUR';
    newBackButton.className = 'close-overlay-btn';
    newBackButton.style.marginTop = '10px';
    newBackButton.addEventListener('click', () => {
        toggleOverlay(document.getElementById('printerSelectOverlay'), false);
    });
    caisseContainer.appendChild(newBackButton);

    // --- GESTION DES VUES PRINCIPALES (MENU, SCANNER, T√âL√âCHARGER) ---
    const views = document.querySelectorAll('.view');
    function showView(viewId) {
        views.forEach(view => {
            view.style.display = 'none';
        });
        const viewToShow = document.getElementById(viewId);
        if (viewToShow) {
            viewToShow.style.display = 'block';
        }
    }

    // --- GESTION DES POP-UPS (OVERLAYS) ---
    function toggleOverlay(overlayElement, show) {
        if (show) {
            overlayElement.style.display = 'flex';
            document.body.classList.add('overlay-active');
        } else {
            overlayElement.style.display = 'none';
            document.body.classList.remove('overlay-active');
        }
    }

    // --- CONNEXION DES BOUTONS AUX ACTIONS ---

    // Overlays
    document.getElementById('hoursBtn').addEventListener('click', () => toggleOverlay(document.getElementById('hoursOverlay'), true));
    document.getElementById('contactsBtn').addEventListener('click', () => toggleOverlay(document.getElementById('contactsOverlay'), true));
    document.getElementById('orderByMailBtn').addEventListener('click', () => toggleOverlay(document.getElementById('orderMailOverlay'), true));
    document.getElementById('depositFileBtn').addEventListener('click', () => toggleOverlay(document.getElementById('printerSelectOverlay'), true));
    document.getElementById('shareAppBtn').addEventListener('click', () => toggleOverlay(document.getElementById('shareOverlay'), true));
    document.querySelectorAll('.close-overlay-btn').forEach(btn => {
      btn.addEventListener('click', () => toggleOverlay(btn.closest('.overlay'), false));
    });

    // Mails
    document.getElementById('haveFileOnPhoneBtn').addEventListener('click', () => window.location.href = `mailto:${config.emailSelfService}`);

    document.getElementById('transferEmailBtn').addEventListener('click', () => {
      // Mise √† jour du contenu de la fen√™tre de confirmation
      document.getElementById('copy-confirm-title').textContent = 'Adresse e-mail copi√©e !';
      document.getElementById('copied-email-box').textContent = config.emailSelfService;
      const instructionsList = document.getElementById('copy-instructions');
      instructionsList.innerHTML = `
        <li>Ouvrez votre application d'e-mails.</li>
        <li>Collez notre adresse comme destinataire.</li>
        <li>Envoyez votre e-mail √† transf√©rer.</li>
        <li>Sur le PC, double-cliquez sur l'ic√¥ne "Bo√Æte de r√©ception" et attendez votre e-mail.</li>
      `;

      // Copie dans le presse-papiers et affichage de la fen√™tre
      navigator.clipboard.writeText(config.emailSelfService)
        .then(() => toggleOverlay(document.getElementById('copyEmailOverlay'), true))
        .catch(() => alert("Erreur lors de la copie de l'adresse e-mail."));
    });

    // Vues
    document.getElementById('downloadAppBtn').addEventListener('click', () => showView('download-view'));
    document.getElementById('backToMainFromDownloadBtn').addEventListener('click', () => showView('main-dashboard'));
    document.getElementById('scanQRCodeBtn').addEventListener('click', () => {
        showView('scanner-view');
        startCamera();
    });
    document.getElementById('cancelScanBtn').addEventListener('click', () => {
        stopCamera();
        showView('main-dashboard');
    });

    // --- LOGIQUE DU SCANNER QR CODE ---
    let stream, scanning = false;
    const video = document.getElementById('video');
    const scanResultOverlay = document.getElementById('scanResultOverlay');
    const scanResultLink = document.getElementById('scan-result-link');
    const followScanLinkBtn = document.getElementById('followScanLinkBtn');
    const rescanBtn = document.getElementById('rescanBtn');
    
    async function startCamera() {
      try {
        if (stream) { 
          stream.getTracks().forEach(track => track.stop());
        }
        stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } });
        video.srcObject = stream;
        video.onloadedmetadata = () => {
          video.play();
          scanning = true;
          requestAnimationFrame(scanLoop);
        };
      } catch (err) {
        console.error("Erreur de cam√©ra:", err);
        alert('Impossible d‚Äôacc√©der √† la cam√©ra. Veuillez v√©rifier les autorisations dans les param√®tres de votre navigateur.');
        showView('main-dashboard');
      }
    }
    
    function stopCamera() {
        scanning = false;
        if (stream) {
            stream.getTracks().forEach(track => track.stop());
            stream = null;
        }
    }
    
    function scanLoop() {
      if (!scanning) return;
      if (video.readyState === video.HAVE_ENOUGH_DATA) {
        const canvas = document.createElement('canvas');
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
        const code = jsQR(imageData.data, imageData.width, imageData.height);
        if (code && code.data) {
            stopCamera();
            
            scanResultLink.textContent = code.data;
            followScanLinkBtn.onclick = () => window.open(code.data, '_blank');
            rescanBtn.onclick = () => {
                toggleOverlay(scanResultOverlay, false);
                showView('scanner-view');
                startCamera();
            };
            toggleOverlay(scanResultOverlay, true);
        }
      }
      if (scanning) {
        requestAnimationFrame(scanLoop);
      }
    }

    // Bouton de partage natif (pour plus tard)
    document.getElementById('nativeShareBtn').addEventListener('click', () => {
        alert("Cette fonction sera bient√¥t active !");
    });
  });
</script>


</body></html>
