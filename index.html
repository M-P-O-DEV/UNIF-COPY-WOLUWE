<html lang="fr"><head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>UNIF-COPY WOLUWE - Impression sur Place</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap');
  * { box-sizing: border-box; }
  body { margin: 0; background: linear-gradient(135deg, #1a1a1a, #2f2f2f, #121212); font-family: 'Orbitron', sans-serif; color: #ff6f00; display: flex; flex-direction: column; align-items: center; min-height: 100vh; overflow-x: hidden; user-select: none; }
  body.overlay-active { overflow: hidden; }
  header { width: 100%; padding: 25px 0; background: linear-gradient(90deg, #ff6f00, #ffb347); color: black; font-size: 2.8rem; font-weight: 900; text-align: center; letter-spacing: 2px; position: relative; overflow: hidden; border-bottom: 4px solid #ff6f00; }
  main { width: 100%; max-width: 700px; padding: 30px 25px; text-align: center; }
  button, .link-button { position: relative; background: transparent; border: 3px solid #ff6f00; color: #ff6f00; font-family: 'Orbitron', sans-serif; font-weight: 900; font-size: 1.2rem; padding: 14px 25px; border-radius: 10px; cursor: pointer; overflow: hidden; transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 1.5px; user-select: none; box-shadow: 0 0 5px #ff6f00, 0 0 15px #ffb347; margin: 10px 0; display: inline-block; text-decoration: none; width: 100%; }
  button:hover, .link-button:hover { color: #ffb347; border-color: #ffb347; box-shadow: 0 0 10px #ffb347, 0 0 20px #ffb347, 0 0 40px #ffb347; }
  .section-title { font-size: 1.8rem; margin-top: 20px; margin-bottom: 20px; border-bottom: 2px solid #ff6f00; padding-bottom: 10px; text-align: center; line-height: 1.2; }
  .bloc { background: rgba(47, 47, 47, 0.3); border: 1px solid #ff6f00; border-radius: 15px; padding: 20px; margin-bottom: 25px; }
  .bloc-description { font-size: 0.9rem; color: #ffb347; margin-bottom: 15px; line-height: 1.4; }
  .button-group { display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; }
  .button-group button, .button-group .link-button { flex: 1 1 200px; min-width: 200px; }
  video { width: 100%; max-width: 600px; border-radius: 15px; box-shadow: 0 0 20px #ff6f00, 0 0 40px #ffb347, inset 0 0 20px #ff6f00; position: relative; background: #121212; }
  
  .overlay { 
    position: fixed; top: 0; left: 0; right: 0; bottom: 0; 
    background: rgba(18, 18, 18, 0.95); color: #ff6f00; 
    display: none; flex-direction: column; justify-content: center;
    align-items: center; padding: 40px 25px; text-align: center; 
    z-index: 9999; overflow-y: auto;
  }

  /* --- MODIFICATION : TAILLE DU BANDEAU ENCORE PLUS R√âDUITE --- */
  .scrolling-banner-container {
    width: 100%;
    background-color: rgba(0, 0, 0, 0.6);
    overflow: hidden;
    white-space: nowrap;
    padding: 2px 0; /* Hauteur encore plus r√©duite */
  }
  .scrolling-text {
    display: inline-block;
    padding-left: 100%;
    animation: scroll-left 25s linear infinite;
    font-size: 0.8rem; /* Taille de police encore plus r√©duite */
    color: #ffb347;
    letter-spacing: 1px;
  }
  @keyframes scroll-left {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-100%);
    }
  }
  /* --- FIN DE LA MODIFICATION --- */

  .overlay-content { max-width: 500px; width: 90%; }
  .printer-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; width: 100%; margin-bottom: 20px; }

  .download-page-title { font-size: 1.3rem; color: #ffb347; line-height: 1.5; margin-bottom: 30px; }
  .download-choice { background: rgba(47, 47, 47, 0.5); border: 1px solid #ffb347; border-radius: 15px; padding: 25px; margin-bottom: 20px; }
  .download-choice h3 { margin-top: 0; font-size: 1.5rem; }
  .download-choice p { font-size: 0.9rem; line-height: 1.4; color: #fff; }
  .share-popup-separator { font-size: 1.5rem; margin: 20px 0; font-weight: 900; color: #ffb347; }
  #share-qr-code { max-width: 200px; width: 100%; border: 2px solid #ffb347; border-radius: 10px; margin-top: 15px; }
  .view { display: none; }

  #horaires-contenu { font-size: 1.3rem; line-height: 1.7; }
  #contact-phone, #contact-mail { font-size: 1.1rem; line-height: 1.6; }
  #copy-instructions { text-align: left; color: #fff; font-size: 1rem; line-height: 1.6; list-style-position: inside; padding-left: 0; margin-top: 15px; }
  #copy-instructions li { margin-bottom: 10px; }
  #copied-email-box { color: #ffb347; font-weight: bold; font-size: 1rem; margin: 15px 0; padding: 10px; border: 1px solid #ffb347; border-radius: 8px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-align: center; }
</style>
</head>
<body>
  <header>UNIF-COPY WOLUWE</header>

  <div class="scrolling-banner-container">
      <p id="scrolling-text" class="scrolling-text"></p>
  </div>

  <main>
    <div id="main-dashboard" class="view" style="display: block;">
      
      <h2 class="section-title">IMPRESSION<br>SELF-SERVICE</h2>
      
      <div class="bloc">
        <p class="bloc-description">Le plus simple et le plus rapide</p>
        <button id="depositFileBtn">D√©poser mes fichiers</button>
      </div>
      
      <div class="bloc">
        <button id="goToEmailChoiceBtn">ENVOYER PAR MAIL</button>
      </div>
      
      <div class="bloc">
        <button id="scanQRCodeBtn">ENVOYER PAR QR CODE</button>
      </div>
      
      <h2 class="section-title">COMMANDES</h2>
      <div class="button-group">
        <button id="orderOnlineBtn" class="link-button">Commander en ligne</button>
        <button id="orderByMailBtn">Commander par mail</button>
      </div>
      
      <h2 class="section-title">INFORMATIONS</h2>
      <div class="button-group">
        <button id="hoursBtn">Heures d'ouverture</button>
        <button id="contactsBtn">Contacts</button>
      </div>

      <h2 class="section-title">APPLICATION</h2>
      <div class="button-group">
        <button id="downloadAppBtn">T√©l√©charger l'application</button>
        <button id="shareAppBtn">Partager l'application</button>
      </div>
    </div>

    <div id="email-choice-view" class="view" style="display: none;">
      <h2 class="section-title">ENVOYER PAR MAIL</h2>
      <div class="bloc">
        <p class="bloc-description">Choisissez la situation qui vous correspond.</p>
        <div class="button-group">
          <button id="haveFileOnPhoneBtn">J'ai un fichier sur mon t√©l√©phone</button>
          <button id="transferEmailBtn">Je veux transf√©rer un e-mail</button>
        </div>
      </div>
      <button id="backToMainFromEmailBtn" style="margin-top: 20px;">RETOUR</button>
    </div>

    <div id="download-view" class="view" style="width: 100%; display: none;">
        <h2 class="download-page-title">T√©l√©chargez l'application pour l'ajouter √† votre √©cran d'accueil!</h2>
        <div class="download-choice">
            <h3>Android</h3>
            <button id="downloadAndroidBtn">TELECHARGER SUR LE PLAYSTORE</button>
        </div>
        <div class="download-choice">
            <h3>iOS (iPhone)</h3>
            <p>Suivez ces √©tapes simples pour ajouter l'application √† votre √©cran d'accueil :</p>
            <ol style="text-align: left; color: #ffb347; font-size: 0.9rem; line-height: 1.6;">
                <li>Appuyez sur l'ic√¥ne de <strong>Partage</strong> üì§ en bas de l'√©cran.</li>
                <li>Faites d√©filer et choisissez <strong>"Sur l'√©cran d'accueil"</strong>.</li>
            </ol>
        </div>
        <button id="backToMainFromDownloadBtn" style="margin-top: 20px;">RETOUR</button>
    </div>

    <div id="scanner-view" class="view" style="width: 100%; display: none;">
      <video id="video" playsinline autoplay muted></video>
      <div id="scanInstruction" style="margin-top: 15px; background: rgba(0,0,0,0.8); color: #ffb347; padding: 15px; border-radius: 10px; border: 1px solid #ffb347; font-size: 1.1rem; line-height: 1.4;">Sur le PC devant vous, double-cliquez sur l'ic√¥ne "SCAN QR CODE" et visez le QR code qui appara√Æt.</div>
      <button id="cancelScanBtn" style="margin-top: 15px;">ANNULER</button>
    </div>
  </main>
  
  <div id="orderWarningOverlay" class="overlay">
    <div class="overlay-content" style="border: 2px solid #ffb347; padding: 25px; border-radius: 15px; background: #1a1a1a;">
        <h3 style="font-size: 1.5rem; margin-top:0; color: #ffb347;">AVERTISSEMENT</h3>
        <p style="font-size: 1.1rem; line-height: 1.6; color: #fff; margin: 20px 0;">
            Assurez-vous de s√©lectionner le magasin de <strong>Woluw√©</strong> sur la page suivante !
        </p>
        <div class="button-group">
            <button id="continueOrderBtn">CONTINUER</button>
            <button class="close-overlay-btn">ANNULER</button>
        </div>
    </div>
  </div>

  <div id="hoursOverlay" class="overlay"><div class="overlay-content"><div id="horaires-contenu"></div></div><button class="close-overlay-btn" style="margin-top:20px;">RETOUR</button></div>
  <div id="contactsOverlay" class="overlay"><div class="overlay-content" style="display:flex; flex-direction:column; gap:20px; width:100%; max-width: 400px;"><div id="contact-phone"></div><div id="contact-mail"></div></div><button class="close-overlay-btn" style="margin-top:30px;">RETOUR</button></div>
  
  <div id="orderMailOverlay" class="overlay">
    <div class="overlay-content">
        <div id="order-mail-address" style="margin-bottom: 20px;"></div>
        <div class="button-group">
            <button id="order-mail-action-btn">ENVOYER UN MAIL</button>
            <button class="close-overlay-btn">RETOUR</button>
        </div>
    </div>
  </div>
  
  <div id="printerSelectOverlay" class="overlay">
    <div class="overlay-content">
        <h3 style="font-size: 1.5rem; margin-bottom: 20px;">S√âLECTIONNEZ LE PC EN FACE DE VOUS</h3>
        <div class="printer-grid" id="printer-grid-container"></div>
    </div>
  </div>

  <div id="copyEmailOverlay" class="overlay">
    <div class="overlay-content" style="border: 2px solid #00ff00; padding: 25px; border-radius: 15px; background: #1a1a1a;">
      <h3 id="copy-confirm-title" style="font-size: 1.3rem; line-height: 1.5; color: #00ff00; margin-top:0; font-weight:bold;"></h3>
      <div id="copied-email-box"></div>
      <ol id="copy-instructions"></ol>
      <button class="close-overlay-btn" style="margin-top: 20px;">J'AI COMPRIS</button>
    </div>
  </div>

  <div id="scanResultOverlay" class="overlay"><div class="overlay-content" style="border: 2px solid #ffb347; padding: 25px; border-radius: 15px; background: #1a1a1a;"><h3 style="font-size: 1.5rem; margin-top:0;">Lien D√©tect√©</h3><p id="scan-result-link" style="font-size: 1rem; color: #ffb347; word-break: break-all; margin: 20px 0;"></p><div class="button-group"><button id="followScanLinkBtn">SUIVRE LE LIEN</button><button id="rescanBtn">RECOMMENCER</button></div></div></div>
  
  <div id="shareOverlay" class="overlay">
    <div class="overlay-content">
      <h3 style="font-size: 1.5rem; margin-bottom: 20px;">Partagez l'application avec vos amis</h3>
      <p style="color: #ffb347;">Presentez le QR Code</p>
      <img id="share-qr-code" alt="QR Code de Partage">
      <div class="share-popup-separator">OU</div>
      <div class="button-group" style="margin-top: 10px;">
        <button id="nativeShareBtn">Envoyez le lien de l'app</button>
        <button class="close-overlay-btn">RETOUR</button>
      </div>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // --- BLOC DE CONFIGURATION ---
    const config = {
      scrollingMessage: "NOUVEAU : Impression A0 - A1 - A2 disponible sur demande ! N'h√©sitez pas √† nous contacter pour plus d'informations.",
      heuresOuverture: `√Ä PARTIR DU 04/08/25<br><br>LUNDI AU SAMEDI<br>10H00 - 14H00<br>14H30 - 17H00`,
      emailCommande: "FACOPYBXL@PROXIMUS.BE",
      emailSelfService: "UNIFCOPY@OUTLOOK.COM",
      telephone: "024613005",
      lienCommandeEnLigne: "https://commande.facopy.be/",
      liensDropbox: {
        pc1: "LIEN_DROPBOX_PC_1", pc2: "LIEN_DROPBOX_PC_2", pc3: "LIEN_DROPBOX_PC_3",
        pc4: "LIEN_DROPBOX_PC_4", pc5: "LIEN_DROPBOX_PC_5", pc6: "LIEN_DROPBOX_PC_6",
        pc7: "LIEN_DROPBOX_PC_7", pc9: "LIEN_DROPBOX_PC_9", pc10: "LIEN_DROPBOX_PC_10",
        pcA: "LIEN_DROPBOX_PC_A", pcB: "LIEN_DROPBOX_PC_B", pcC: "LIEN_DROPBOX_PC_C",
        pcCaisse: "LIEN_DROPBOX_PC_CAISSE"
      }
    };

    // --- INITIALISATION DYNAMIQUE DE LA PAGE ---
    function initDynamicContent() {
        document.getElementById('scrolling-text').textContent = config.scrollingMessage;
        
        document.getElementById('horaires-contenu').innerHTML = config.heuresOuverture;
        document.getElementById('order-mail-address').textContent = config.emailCommande;
        document.getElementById('order-mail-action-btn').onclick = () => window.location.href = `mailto:${config.emailCommande}`;
        document.getElementById('contact-phone').innerHTML = `<span>TELEPHONE :</span><br>${config.telephone.replace(/(\d{2})(\d{3})(\d{2})(\d{2})/, '$1 $2 $3 $4')}<button onclick="window.location.href='tel:+32${config.telephone.substring(1)}'" style="margin-top:10px;">APPELER</button>`;
        document.getElementById('contact-mail').innerHTML = `<span>MAIL :</span><br>${config.emailCommande}<button onclick="window.location.href='mailto:${config.emailCommande}'" style="margin-top:10px;">POSER UNE QUESTION</button>`;
        document.getElementById('share-qr-code').src = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${window.location.href}`;
    }

    // --- CONSTRUCTION DE LA GRILLE DES PC ---
    function buildPrinterGrid() {
        const printerGrid = document.getElementById('printer-grid-container');
        printerGrid.innerHTML = ''; 

        const pcButtonsFragment = document.createDocumentFragment();
        const caisseContainer = document.createElement('div');
        caisseContainer.style.cssText = 'width: 100%; margin-top: 20px;';

        Object.keys(config.liensDropbox).forEach(pcId => {
            const button = document.createElement('button');
            button.className = 'printer-choice-btn';
            button.dataset.linkId = pcId;

            button.addEventListener('click', () => {
                const dropboxUrl = config.liensDropbox[pcId];
                if (dropboxUrl && dropboxUrl.startsWith('http')) {
                    window.open(dropboxUrl, '_blank');
                    toggleOverlay(document.getElementById('printerSelectOverlay'), false);
                } else {
                    alert('Lien de d√©p√¥t non configur√© pour ce PC.');
                }
            });

            if (pcId === 'pcCaisse') {
                button.textContent = 'PC CAISSE';
                caisseContainer.appendChild(button);
            } else {
                button.textContent = `PC ${pcId.replace('pc', '').toUpperCase()}`;
                pcButtonsFragment.appendChild(button);
            }
        });

        const newBackButton = document.createElement('button');
        newBackButton.textContent = 'RETOUR';
        newBackButton.className = 'close-overlay-btn';
        newBackButton.style.marginTop = '10px';
        
        caisseContainer.appendChild(newBackButton);
        printerGrid.appendChild(pcButtonsFragment);
        printerGrid.after(caisseContainer);
    }

    // --- GESTION DES VUES ET OVERLAYS ---
    const views = document.querySelectorAll('.view');
    function showView(viewId) {
        views.forEach(view => view.style.display = 'none');
        document.getElementById(viewId).style.display = 'block';
    }

    function toggleOverlay(overlayElement, show) {
        if (!overlayElement) return;
        overlayElement.style.display = show ? 'flex' : 'none';
        document.body.classList.toggle('overlay-active', show);
    }

    // --- LOGIQUE DES BOUTONS ---
    function setupEventListeners() {
        document.body.addEventListener('click', (e) => {
            const target = e.target;
            const targetId = target.id;

            const actions = {
                'goToEmailChoiceBtn': () => showView('email-choice-view'),
                'backToMainFromEmailBtn': () => showView('main-dashboard'),
                'downloadAppBtn': () => showView('download-view'),
                'backToMainFromDownloadBtn': () => showView('main-dashboard'),
                'scanQRCodeBtn': () => { showView('scanner-view'); startCamera(); },
                'cancelScanBtn': () => { stopCamera(); showView('main-dashboard'); },
                'hoursBtn': () => toggleOverlay(document.getElementById('hoursOverlay'), true),
                'contactsBtn': () => toggleOverlay(document.getElementById('contactsOverlay'), true),
                'orderByMailBtn': () => toggleOverlay(document.getElementById('orderMailOverlay'), true),
                'depositFileBtn': () => toggleOverlay(document.getElementById('printerSelectOverlay'), true),
                'shareAppBtn': () => toggleOverlay(document.getElementById('shareOverlay'), true),
                'haveFileOnPhoneBtn': () => window.location.href = `mailto:${config.emailSelfService}`,
                'transferEmailBtn': handleTransferEmail,
                'nativeShareBtn': () => alert("Cette fonction sera bient√¥t active !"),
                
                'orderOnlineBtn': () => toggleOverlay(document.getElementById('orderWarningOverlay'), true),
                'continueOrderBtn': () => {
                    window.open(config.lienCommandeEnLigne, '_blank', 'noopener,noreferrer');
                    toggleOverlay(document.getElementById('orderWarningOverlay'), false);
                }
            };

            if (actions[targetId]) {
                actions[targetId]();
            } else if (target.classList.contains('close-overlay-btn')) {
                const overlay = target.closest('.overlay');
                if (overlay) toggleOverlay(overlay, false);
            }
        });
    }

    function handleTransferEmail() {
        document.getElementById('copy-confirm-title').textContent = 'Adresse e-mail copi√©e !';
        document.getElementById('copied-email-box').textContent = config.emailSelfService;
        document.getElementById('copy-instructions').innerHTML = `
            <li>Ouvrez votre application d'e-mails.</li>
            <li>Collez notre adresse comme destinataire.</li>
            <li>Envoyez votre e-mail √† transf√©rer.</li>
            <li>Sur le PC, double-cliquez sur l'ic√¥ne "Bo√Æte de r√©ception" et attendez votre e-mail.</li>`;
        
        navigator.clipboard.writeText(config.emailSelfService)
            .then(() => toggleOverlay(document.getElementById('copyEmailOverlay'), true))
            .catch(() => alert("Erreur lors de la copie de l'adresse e-mail."));
    }

    // --- LOGIQUE DU SCANNER QR CODE ---
    let stream, scanning = false;
    const video = document.getElementById('video');
    const scanResultOverlay = document.getElementById('scanResultOverlay');
    
    async function startCamera() {
      try {
        if (stream) stream.getTracks().forEach(track => track.stop());
        stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } });
        video.srcObject = stream;
        await video.play();
        scanning = true;
        requestAnimationFrame(scanLoop);
      } catch (err) {
        console.error("Erreur de cam√©ra:", err);
        alert('Impossible d‚Äôacc√©der √† la cam√©ra. Veuillez v√©rifier les autorisations.');
        showView('main-dashboard');
      }
    }
    
    function stopCamera() {
        scanning = false;
        if (stream) {
            stream.getTracks().forEach(track => track.stop());
            stream = null;
        }
    }
    
    function scanLoop() {
      if (!scanning) return;
      if (video.readyState === video.HAVE_ENOUGH_DATA) {
        const canvas = document.createElement('canvas');
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
        const code = jsQR(imageData.data, imageData.width, imageData.height);
        
        if (code && code.data) {
            stopCamera();
            document.getElementById('scan-result-link').textContent = code.data;
            document.getElementById('followScanLinkBtn').onclick = () => window.open(code.data, '_blank');
            document.getElementById('rescanBtn').onclick = () => {
                toggleOverlay(scanResultOverlay, false);
                startCamera();
            };
            toggleOverlay(scanResultOverlay, true);
            return;
        }
      }
      requestAnimationFrame(scanLoop);
    }
    
    // --- APPEL DES FONCTIONS D'INITIALISATION ---
    initDynamicContent();
    buildPrinterGrid();
    setupEventListeners();
  });
</script>

</body></html>
