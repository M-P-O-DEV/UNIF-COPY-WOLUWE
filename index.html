<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>UNIF-COPY WOLUWE - Impression sur Place</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap');
  * { box-sizing: border-box; }
  body { margin: 0; background: linear-gradient(135deg, #1a1a1a, #2f2f2f, #121212); font-family: 'Orbitron', sans-serif; color: #ff6f00; display: flex; flex-direction: column; align-items: center; min-height: 100vh; overflow-x: hidden; user-select: none; }
  body.overlay-active { overflow: hidden; }
  header { width: 100%; padding: 25px 0; background: linear-gradient(90deg, #ff6f00, #ffb347); color: black; font-size: 2.8rem; font-weight: 900; text-align: center; letter-spacing: 2px; position: relative; overflow: hidden; border-bottom: 4px solid #ff6f00; }
  main { width: 100%; max-width: 700px; padding: 30px 25px; text-align: center; }
  button, .link-button { position: relative; background: transparent; border: 3px solid #ff6f00; color: #ff6f00; font-family: 'Orbitron', sans-serif; font-weight: 900; font-size: 1.2rem; padding: 14px 25px; border-radius: 10px; cursor: pointer; overflow: hidden; transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 1.5px; user-select: none; box-shadow: 0 0 5px #ff6f00, 0 0 15px #ffb347; margin: 10px 0; display: inline-block; text-decoration: none; width: 100%; }
  button:hover, .link-button:hover { color: #ffb347; border-color: #ffb347; box-shadow: 0 0 10px #ffb347, 0 0 20px #ffb347, 0 0 40px #ffb347; }
  .section-title { font-size: 1.8rem; margin-top: 20px; margin-bottom: 20px; border-bottom: 2px solid #ff6f00; padding-bottom: 10px; text-align: center; }
  .bloc { background: rgba(47, 47, 47, 0.3); border: 1px solid #ff6f00; border-radius: 15px; padding: 20px; margin-bottom: 25px; }
  .bloc-description { font-size: 0.9rem; color: #ffb347; margin-bottom: 15px; line-height: 1.4; }
  .button-group { display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; }
  .button-group button, .button-group .link-button { flex: 1 1 200px; min-width: 200px; }
  video { width: 100%; max-width: 600px; border-radius: 15px; box-shadow: 0 0 20px #ff6f00, 0 0 40px #ffb347, inset 0 0 20px #ff6f00; position: relative; display: none; background: #121212; }
  .overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(18, 18, 18, 0.95); color: #ff6f00; display: none; flex-direction: column; justify-content: center; align-items: center; padding: 25px; text-align: center; z-index: 9999; }
  .overlay-content { max-width: 500px; }
  .printer-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; width: 100%; margin-bottom: 20px; }

  /* */
  .download-page-title { font-size: 1.3rem; color: #ffb347; line-height: 1.5; margin-bottom: 30px; }
  .download-choice { background: rgba(47, 47, 47, 0.5); border: 1px solid #ffb347; border-radius: 15px; padding: 25px; margin-bottom: 20px; }
  .download-choice h3 { margin-top: 0; font-size: 1.5rem; }
  .download-choice p { font-size: 0.9rem; line-height: 1.4; color: #fff; }
  .share-popup-separator { font-size: 1.5rem; margin: 20px 0; font-weight: 900; color: #ffb347; }
  #share-qr-code { max-width: 200px; width: 100%; border: 2px solid #ffb347; border-radius: 10px; margin-top: 15px; }
  /* */

</style>
</head>
<body>
  <header data-text="UNIF-COPY WOLUWE">UNIF-COPY WOLUWE</header>

  <main>
    <div id="main-dashboard">
      <h2 class="section-title">IMPRESSION SELF-SERVICE</h2>
      <div class="bloc"><h3>D√©p√¥t Rapide (Recommand√©)</h3><p class="bloc-description">Pour tous vos fichiers (PDF, photos...). Id√©al pour envoyer plusieurs fichiers √† la fois.</p><button id="depositFileBtn">D√©poser mes fichiers</button></div>
      <div class="bloc"><h3>Envoi par E-mail</h3><p class="bloc-description">Choisissez la situation qui vous correspond.</p><div class="button-group"><button id="haveFileOnPhoneBtn">J'ai un fichier sur mon t√©l√©phone</button><button id="transferEmailBtn">Je veux transf√©rer un e-mail</button></div></div>
      <div class="bloc"><h3>Transfert par QR Code</h3><p class="bloc-description">Pour une connexion directe et rapide entre votre t√©l√©phone et le PC.</p><button id="scanQRCodeBtn">Scanner le QR Code du PC</button></div>
      
      <h2 class="section-title">COMMANDES</h2>
      <div class="button-group"><a id="orderOnlineLink" href="#" target="_blank" rel="noopener noreferrer" class="link-button">Commander en ligne</a><button id="orderByMailBtn">Commander par mail</button></div>
      
      <h2 class="section-title">INFORMATIONS</h2>
      <div class="button-group"><button id="hoursBtn">Heures d'ouverture</button><button id="contactsBtn">Contacts</button></div>

      <h2 class="section-title">APPLICATION</h2>
      <div class="button-group">
        <button id="downloadAppBtn">T√©l√©charger l'application</button>
        <button id="shareAppBtn">Partager l'application</button>
      </div>
      </div>

    <div id="download-view" style="display:none; width:100%;">
        <h2 class="download-page-title">T√©l√©chargez l'application pour l'ajouter √† votre √©cran d'accueil, plus besoin de scanner notre QR code la prochaine fois !</h2>

        <div class="download-choice">
            <h3>Android</h3>
            <p>Obtenez la version officielle et s√©curis√©e de l'application sur le Google Play Store.</p>
            <button id="downloadAndroidBtn">Disponible sur Google Play</button>
        </div>

        <div class="download-choice">
            <h3>iOS (iPhone)</h3>
            <p>Suivez ces √©tapes simples pour ajouter l'application √† votre √©cran d'accueil :</p>
            <ol style="text-align: left; color: #ffb347; font-size: 0.9rem; line-height: 1.6;">
                <li>Ouvrez ce site dans <strong>Safari</strong>.</li>
                <li>Appuyez sur l'ic√¥ne de <strong>Partage</strong> üì§ en bas de l'√©cran.</li>
                <li>Faites d√©filer et choisissez <strong>"Sur l'√©cran d'accueil"</strong>.</li>
            </ol>
             <button id="downloadIosBtn" style="display: none;">AFFICHER LES INSTRUCTIONS</button>
        </div>

        <button id="backToMainBtn" style="margin-top: 20px;">RETOUR</button>
    </div>
    <div id="scanner-view" style="display:none; width:100%;"><video id="video" playsinline autoplay muted></video><div id="scanInstruction" style="margin-top: 15px; background: rgba(0,0,0,0.8); color: #ffb347; padding: 15px; border-radius: 10px; border: 1px solid #ffb347; font-size: 1.1rem; line-height: 1.4;"></div><button id="cancelScanBtn" style="margin-top: 15px;">ANNULER</button></div>
  </main>
  
  <div id="hoursOverlay" class="overlay"><div class="overlay-content"><div id="horaires-contenu"></div></div><button class="close-overlay-btn" style="margin-top:20px;">FERMER</button></div>
  <div id="contactsOverlay" class="overlay"><div class="overlay-content" style="display:flex; flex-direction:column; gap:20px; width:100%; max-width: 400px;"><div id="contact-phone"></div><div id="contact-mail"></div></div><button class="close-overlay-btn" style="margin-top:30px;">RETOUR</button></div>
  <div id="orderMailOverlay" class="overlay"><div class="overlay-content"><div id="order-mail-address"></div><br><button id="order-mail-action-btn">ENVOYER UN MAIL</button></div><button class="close-overlay-btn" style="margin-top:20px;">FERMER</button></div>
  <div id="printerSelectOverlay" class="overlay"><div class="overlay-content"><h3 style="font-size: 1.5rem; margin-bottom: 20px;">S√âLECTIONNEZ LE PC EN FACE DE VOUS</h3><div class="printer-grid" id="printer-grid-container"></div><button class="close-overlay-btn" style="margin-top:20px;">RETOUR</button></div></div>
  <div id="copyEmailOverlay" class="overlay">
      <div class="overlay-content" style="border: 2px solid #00ff00; padding: 25px; border-radius: 15px; background: #1a1a1a;">
        <p style="font-size: 1.2rem; line-height: 1.5; color: #00ff00; margin-top:0; font-weight:bold;" id="copy-confirm-text"></p>
        <p style="font-size: 1rem; line-height: 1.5;">Vous pouvez maintenant aller dans votre application e-mail pour transf√©rer votre message.</p>
        <button class="close-overlay-btn">J'AI COMPRIS</button>
      </div>
  </div>
  <div id="scanResultOverlay" class="overlay">
      <div class="overlay-content" style="border: 2px solid #ffb347; padding: 25px; border-radius: 15px; background: #1a1a1a;">
        <h3 style="font-size: 1.5rem; margin-top:0;">Lien D√©tect√©</h3>
        <p id="scan-result-link" style="font-size: 1rem; color: #ffb347; word-break: break-all; margin: 20px 0;"></p>
        <div class="button-group">
            <button id="followScanLinkBtn">SUIVRE LE LIEN</button>
            <button id="rescanBtn">RECOMMENCER</button>
        </div>
      </div>
  </div>

  <div id="shareOverlay" class="overlay">
      <div class="overlay-content">
          <h3 style="font-size: 1.5rem; margin-bottom: 20px;">Partager l'application</h3>
          
          <p style="color: #ffb347;">Partager par QR Code</p>
          <img id="share-qr-code" src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=https://VOTRE_URL_ICI" alt="QR Code de Partage">
          
          <div class="share-popup-separator">OU</div>
          
           <button id="nativeShareBtn">üì≤ Envoyez le lien</button>
      </div>
      <button class="close-overlay-btn" style="margin-top:20px;">FERMER</button>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // --- BLOC DE CONFIGURATION ---
    const config = {
      heuresOuverture: `√Ä PARTIR DU 04/08/25<br><br>LUNDI AU SAMEDI<br>10H00 - 14H00<br>14H30 - 17H00`,
      emailCommande: "FACOPYBXL@PROXIMUS.BE",
      emailSelfService: "UNIFCOPY@OUTLOOK.COM",
      telephone: "024613005",
      lienCommandeEnLigne: "https://commande.facopy.be/",
      liensDropbox: {
        pc1: "LIEN_DROPBOX_PC_1", pc2: "LIEN_DROPBOX_PC_2", pc3: "LIEN_DROPBOX_PC_3",
        pc4: "LIEN_DROPBOX_PC_4", pc5: "LIEN_DROPBOX_PC_5", pc6: "LIEN_DROPBOX_PC_6",
        pc7: "LIEN_DROPBOX_PC_7", pc9: "LIEN_DROPBOX_PC_9", pc10: "LIEN_DROPBOX_PC_10",
        pcA: "LIEN_DROPBOX_PC_A", pcB: "LIEN_DROPBOX_PC_B", pcC: "LIEN_DROPBOX_PC_C",
        pcCaisse: "LIEN_DROPBOX_PC_CAISSE"
      }
    };

    // --- INITIALISATION DE LA PAGE ---
    document.getElementById('horaires-contenu').innerHTML = config.heuresOuverture;
    document.getElementById('orderOnlineLink').href = config.lienCommandeEnLigne;
    document.getElementById('order-mail-address').textContent = config.emailCommande;
    document.getElementById('order-mail-action-btn').onclick = () => window.location.href = `mailto:${config.emailCommande}`;
    document.getElementById('contact-phone').innerHTML = `<span>TELEPHONE :</span><br>${config.telephone.replace(/(\d{2})(\d{3})(\d{2})(\d{2})/, '$1 $2 $3 $4')}<button onclick="window.location.href='tel:+32${config.telephone.substring(1)}'" style="margin-top:10px;">APPELER</button>`;
    document.getElementById('contact-mail').innerHTML = `<span>MAIL :</span><br>${config.emailCommande}<button onclick="window.location.href='mailto:${config.emailCommande}'" style="margin-top:10px;">POSER UNE QUESTION</button>`;
    document.getElementById('scanInstruction').innerHTML = `Sur le PC devant vous, double-cliquez sur l'ic√¥ne "SCAN QR CODE" et visez le QR code qui appara√Æt.`;

    const printerGrid = document.getElementById('printer-grid-container');
    for (const pcId in config.liensDropbox) {
        const button = document.createElement('button');
        button.className = 'printer-choice-btn';
        button.dataset.linkId = pcId;
        if (pcId === 'pcCaisse') {
            button.textContent = 'PC CAISSE';
        } else {
            button.textContent = `PC ${pcId.replace('pc', '').toUpperCase()}`;
        }
        button.addEventListener('click', () => {
            const dropboxUrl = config.liensDropbox[pcId];
            if (dropboxUrl && dropboxUrl.startsWith('https')) {
                window.open(dropboxUrl, '_blank');
                toggleOverlay(document.getElementById('printerSelectOverlay'), false);
            } else {
                alert('Lien de d√©p√¥t non configur√© pour ce PC.');
            }
        });
        printerGrid.appendChild(button);
    }

    // --- GESTION DES CLICS SUR LES BOUTONS ---
    const mainDashboard = document.getElementById('main-dashboard');
    const scannerView = document.getElementById('scanner-view');
    
    function toggleOverlay(overlayElement, show) {
        if (show) {
            overlayElement.style.display = 'flex';
            document.body.classList.add('overlay-active');
        } else {
            overlayElement.style.display = 'none';
            document.body.classList.remove('overlay-active');
        }
    }

    document.getElementById('hoursBtn').addEventListener('click', () => toggleOverlay(document.getElementById('hoursOverlay'), true));
    document.getElementById('contactsBtn').addEventListener('click', () => toggleOverlay(document.getElementById('contactsOverlay'), true));
    document.getElementById('orderByMailBtn').addEventListener('click', () => toggleOverlay(document.getElementById('orderMailOverlay'), true));
    document.getElementById('depositFileBtn').addEventListener('click', () => toggleOverlay(document.getElementById('printerSelectOverlay'), true));
    
    document.querySelectorAll('.close-overlay-btn').forEach(btn => {
      btn.addEventListener('click', () => toggleOverlay(btn.closest('.overlay'), false));
    });

    document.getElementById('haveFileOnPhoneBtn').addEventListener('click', () => window.location.href = `mailto:${config.emailSelfService}`);
    document.getElementById('transferEmailBtn').addEventListener('click', () => {
      document.getElementById('copy-confirm-text').textContent = `L'adresse ${config.emailSelfService} a √©t√© copi√©e dans votre presse-papier.`;
      navigator.clipboard.writeText(config.emailSelfService)
        .then(() => toggleOverlay(document.getElementById('copyEmailOverlay'), true))
        .catch(() => alert("Erreur de copie."));
    });

    // const downloadView = document.getElementById('download-view');
    
    document.getElementById('downloadAppBtn').addEventListener('click', () => {
        mainDashboard.style.display = 'none';
        scannerView.style.display = 'none'; // Assurons-nous que le scanner est aussi cach√©
        downloadView.style.display = 'block';
    });

    document.getElementById('backToMainBtn').addEventListener('click', () => {
        downloadView.style.display = 'none';
        mainDashboard.style.display = 'block';
    });

    document.getElementById('shareAppBtn').addEventListener('click', () => {
        toggleOverlay(document.getElementById('shareOverlay'), true);
    });
    // // --- LOGIQUE DU SCANNER QR CODE ---
    let stream, scanning = false;
    const video = document.getElementById('video');
    const scanResultOverlay = document.getElementById('scanResultOverlay');
    const scanResultLink = document.getElementById('scan-result-link');
    const followScanLinkBtn = document.getElementById('followScanLinkBtn');
    const rescanBtn = document.getElementById('rescanBtn');
    
    document.getElementById('scanQRCodeBtn').addEventListener('click', () => {
      mainDashboard.style.display = 'none';
      downloadView.style.display = 'none'; // Assurons-nous que la page de t√©l√©chargement est cach√©e
      scannerView.style.display = 'block';
      video.style.display = 'block';
      startCamera();
    });

    document.getElementById('cancelScanBtn').addEventListener('click', resetScan);
    
    async function startCamera() {
      try {
        stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } });
        video.srcObject = stream;
        video.onloadedmetadata = () => {
          video.play();
          scanning = true;
          requestAnimationFrame(scanLoop);
        };
      } catch (err) {
        alert('Impossible d‚Äôacc√©der √† la cam√©ra. Veuillez v√©rifier les autorisations.');
        resetScan();
      }
    }
    
    function scanLoop() {
      if (!scanning) return;
      if (video.readyState === video.HAVE_ENOUGH_DATA) {
        const canvas = document.createElement('canvas');
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
        const code = jsQR(imageData.data, imageData.width, imageData.height);
        if (code && code.data) {
            scanning = false;
            if (stream) stream.getTracks().forEach(track => track.stop());
            
            scanResultLink.textContent = code.data;
            followScanLinkBtn.onclick = () => window.open(code.data, '_blank');
            rescanBtn.onclick = () => {
                toggleOverlay(scanResultOverlay, false);
                resetScan();
            };
            toggleOverlay(scanResultOverlay, true);
        }
      }
      if (scanning) {
        requestAnimationFrame(scanLoop);
      }
    }
    
    function resetScan() {
      scanning = false;
      if (stream) stream.getTracks().forEach(track => track.stop());
      stream = null;
      video.style.display = 'none';
      scannerView.style.display = 'none';
      mainDashboard.style.display = 'block';
      toggleOverlay(scanResultOverlay, false);
    }
  });
</script>
</body>
</html>
